before_compile:
  - npm install --save serverless-s3-sync serverless-domain-manager


before_build:
  - apt-key adv --fetch-keys https://dl-ssl.google.com/linux/linux_signing_key.pub
  - sh -c 'echo "deb https://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google.list'
  - apt-get update
  - apt-get install xmlsec1 -y -q
  - apt-get install default-jdk -y -q
  - apt-get install maven -y -q
  - echo "Run unit tests"
  - echo "installing chrome"
  - apt-get install apt-transport-https -y -q
  - apt-get install google-chrome-stable -y -q
  - serverless create_domain

before_deploy:
  - echo "download pip dependencies to support vendored way of including pip"
  - echo "sls print"

after_deploy:
  - echo "Run Functional tests"
