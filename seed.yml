before_compile:
  - npm install --save serverless-s3-sync serverless-domain-manager


before_build:
  - apt-get update
  - echo "-----------------"
  - pwd
  - ls
  - apt-get install xmlsec1 -y -q
  - apt-get install default-jdk -y -q
  - apt-get install maven -y -q
  - echo "Run unit tests"
  - serverless create_domain
  - echo "installing chrome"
  - apt-get install wget -y -q
  - apt-get update
  - apt-get install apt-transport-https
  - wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | apt-key add -
  - sh -c 'echo "deb https://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google.list'
  - apt-get update
  - apt-get install google-chrome-stable -y -q




before_deploy:
  - echo "download pip dependencies to support vendored way of including pip"
  - echo "sls print"

after_deploy:
  - echo "Run Functional tests"
  - mvn -X -f functionaltests/WebdriverTest/pom.xml clean test -DtestFile=testng.xml
